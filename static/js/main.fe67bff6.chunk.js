(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{50:function(e,n,t){},51:function(e,n,t){},81:function(e,n){},84:function(e,n,t){},85:function(e,n,t){},86:function(e,n,t){},94:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(42),o=t.n(c),u=(t(50),t(44)),i=t(1),s=t(11),l=t(96),m=(t(51),function(e){var n=Object(a.useState)(""),t=Object(s.a)(n,2),c=t[0],o=t[1];return r.a.createElement("div",{className:"btn-page"},r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"create-btn",onClick:function(){var n=Object(l.a)();e.history.push("/room/".concat(n))}},"Create Room"),r.a.createElement("input",{type:"text",placeholder:"Input chat ID here",value:c,onChange:function(e){o(e.target.value)}}),r.a.createElement("button",{className:"create-btn",onClick:function(){e.history.push("/room/".concat(c))}},"Join")))}),d=t(24),f=t(43),p=t.n(f),h=(t(84),function(e){var n=e.messages;return r.a.createElement("div",{className:"messages_container"},n.map((function(e,n){return e.yours?r.a.createElement("div",{className:"my_message_container",key:n},r.a.createElement("div",{className:"my_message"},e.value)):r.a.createElement("div",{className:"received_message_container",key:n},r.a.createElement("div",{className:"received_message"},e.value),r.a.createElement("div",{id:"usr-r"},"Username"))})))}),v=(t(85),function(e){var n=Object(a.useRef)(),t=Object(a.useRef)(),c=Object(a.useRef)(),o=Object(a.useRef)(),u=Object(a.useState)(""),i=Object(s.a)(u,2),l=i[0],m=i[1],f=Object(a.useState)([]),v=Object(s.a)(f,2),g=v[0],b=v[1];function E(e){b((function(n){return[].concat(Object(d.a)(n),[{yours:!1,value:e.data}])}))}function N(e){var a=new RTCPeerConnection({iceServers:[{urls:"stun:nettverksprogg.eastus2.cloudapp.azure.com:3478"}]});return a.onicecandidate=y,a.onnegotiationneeded=function(){return function(e){n.current.createOffer().then((function(e){return n.current.setLocalDescription(e)})).then((function(){var a={target:e,caller:t.current.id,sdp:n.current.localDescription};t.current.emit("offer",a)})).catch((function(e){return console.log(e)}))}(e)},a}function j(e){n.current=N(),n.current.ondatachannel=function(e){o.current=e.channel,o.current.onmessage=E};var a=new RTCSessionDescription(e.sdp);n.current.setRemoteDescription(a).then((function(){})).then((function(){return n.current.createAnswer()})).then((function(e){return n.current.setLocalDescription(e)})).then((function(){var a={target:e.caller,caller:t.current.id,sdp:n.current.localDescription};t.current.emit("answer",a)}))}function w(e){var t=new RTCSessionDescription(e.sdp);n.current.setRemoteDescription(t).catch((function(e){return console.log(e)}))}function y(e){if(e.candidate){var n={target:c.current,candidate:e.candidate};t.current.emit("ice-candidate",n)}}function C(e){var t=new RTCIceCandidate(e);n.current.addIceCandidate(t).catch((function(e){return console.log(e)}))}function D(){o.current.send(l),b((function(e){return[].concat(Object(d.a)(e),[{yours:!0,value:l}])})),m("")}Object(a.useEffect)((function(){t.current=p.a.connect("https://signaling-server-nettprogg.herokuapp.com/"),t.current.emit("join room",e.match.params.roomID),t.current.on("other user",(function(e){!function(e){n.current=N(e),o.current=n.current.createDataChannel("sendChannel"),o.current.onmessage=E}(e),c.current=e})),t.current.on("user joined",(function(e){c.current=e})),t.current.on("offer",j),t.current.on("answer",w),t.current.on("ice-candidate",C)}),[]);return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Chat room: ",e.match.params.roomID),r.a.createElement("div",{className:"username"},r.a.createElement("input",{id:"name",type:"text",placeholder:"Username"}),r.a.createElement("button",{id:"name-btn"},"Submit")),r.a.createElement(h,{messages:g}),r.a.createElement("div",{className:"send-msg"},r.a.createElement("textarea",{className:"msg-box",value:l,onChange:function(e){m(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&D()},placeholder:"Write your message here..."}),r.a.createElement("button",{className:"btn",onClick:D},"Send")))});t(86);var g=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{basename:"/STUN-server---IDATT2104-Nettverksprogrammering"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:m}),r.a.createElement(i.a,{path:"/room/:roomID",component:v}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[94,1,2]]]);
//# sourceMappingURL=main.fe67bff6.chunk.js.map