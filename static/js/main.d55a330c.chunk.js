(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{50:function(e,t,n){},51:function(e,t,n){},81:function(e,t){},84:function(e,t,n){},85:function(e,t,n){},86:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(42),o=n.n(c),u=(n(50),n(44)),i=n(1),s=n(8),l=n(96),m=(n(51),function(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(!1),i=Object(s.a)(u,2),m=i[0],d=i[1],f=Object(a.useState)(!0),v=Object(s.a)(f,2),p=v[0],h=v[1];function b(){var t=Object(l.a)();e.history.push("/room/".concat(t))}function g(){e.history.push("/room/".concat(c))}function E(e){o(e.target.value)}var j=function(){return r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"create-btn",id:"b1",onClick:b},"Create Room"),r.a.createElement("button",{className:"create-btn",onClick:O},"Join Room"))},N=function(){return r.a.createElement("div",{id:"join-form"},r.a.createElement("button",{type:"text",className:"join-btn",onClick:C},"X"),r.a.createElement("input",{type:"text",className:"join-text",placeholder:"Input chat ID here",value:c,onChange:E}),r.a.createElement("button",{className:"join-btn",onClick:g},"Join"))},O=function(){d(!0),h(!1)},C=function(){h(!0),d(!1)};return r.a.createElement("div",{className:"btn-page"},r.a.createElement("div",{className:"btn-container"},p?r.a.createElement(j,null):null,m?r.a.createElement(N,null):null))}),d=n(24),f=n(43),v=n.n(f),p=(n(84),function(e){var t=e.messages;return r.a.createElement("div",{className:"messages_container"},t.map((function(e,t){return e.yours?r.a.createElement("div",{className:"my_message_container",key:t},r.a.createElement("div",{className:"my_message"},e.value)):r.a.createElement("div",{className:"received_message_container",key:t},r.a.createElement("div",{className:"received_message"},e.value),r.a.createElement("div",{id:"usr-r"},"Username"))})))}),h=(n(85),function(e){var t=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useRef)(),o=Object(a.useRef)(),u=Object(a.useState)(""),i=Object(s.a)(u,2),l=i[0],m=i[1],f=Object(a.useState)([]),h=Object(s.a)(f,2),b=h[0],g=h[1];function E(e){g((function(t){return[].concat(Object(d.a)(t),[{yours:!1,value:e.data}])}))}function j(e){var a=new RTCPeerConnection({iceServers:[{urls:"stun:nettverksprogg.eastus2.cloudapp.azure.com:3478"}]});return a.onicecandidate=C,a.onnegotiationneeded=function(){return function(e){t.current.createOffer().then((function(e){return t.current.setLocalDescription(e)})).then((function(){var a={target:e,caller:n.current.id,sdp:t.current.localDescription};n.current.emit("offer",a)})).catch((function(e){return console.log(e)}))}(e)},a}function N(e){t.current=j(),t.current.ondatachannel=function(e){o.current=e.channel,o.current.onmessage=E};var a=new RTCSessionDescription(e.sdp);t.current.setRemoteDescription(a).then((function(){})).then((function(){return t.current.createAnswer()})).then((function(e){return t.current.setLocalDescription(e)})).then((function(){var a={target:e.caller,caller:n.current.id,sdp:t.current.localDescription};n.current.emit("answer",a)}))}function O(e){var n=new RTCSessionDescription(e.sdp);t.current.setRemoteDescription(n).catch((function(e){return console.log(e)}))}function C(e){if(e.candidate){var t={target:c.current,candidate:e.candidate};n.current.emit("ice-candidate",t)}}function y(e){var n=new RTCIceCandidate(e);t.current.addIceCandidate(n).catch((function(e){return console.log(e)}))}function w(){o.current.send(l),g((function(e){return[].concat(Object(d.a)(e),[{yours:!0,value:l}])})),m("")}Object(a.useEffect)((function(){n.current=v.a.connect("https://signaling-server-nettprogg.herokuapp.com/"),n.current.emit("join room",e.match.params.roomID),n.current.on("other user",(function(e){!function(e){t.current=j(e),o.current=t.current.createDataChannel("sendChannel"),o.current.onmessage=E}(e),c.current=e})),n.current.on("user joined",(function(e){c.current=e})),n.current.on("offer",N),n.current.on("answer",O),n.current.on("ice-candidate",y)}),[]);return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Chat ID: ",e.match.params.roomID),r.a.createElement("div",{className:"username"},r.a.createElement("input",{id:"name",type:"text",placeholder:"Username"}),r.a.createElement("button",{id:"name-btn"},"Submit")),r.a.createElement(p,{messages:b}),r.a.createElement("div",{className:"send-msg"},r.a.createElement("textarea",{className:"msg-box",value:l,onChange:function(e){m(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&w()},placeholder:"Write your message here..."}),r.a.createElement("button",{className:"btn",onClick:w},"Send")))});n(86);var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{basename:"/STUN-server---IDATT2104-Nettverksprogrammering"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:m}),r.a.createElement(i.a,{path:"/room/:roomID",component:h}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(b,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[94,1,2]]]);
//# sourceMappingURL=main.d55a330c.chunk.js.map